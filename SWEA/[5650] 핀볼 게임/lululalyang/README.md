# [SWEA]/[5650] 핀볼 게임

## - Simulation -

**Main**

* `void initializeList()`

  : 각 블럭별로 부딪히는 방향에 따라 바뀌는 방향을 저장하는 `list`인 `DirbyBlock[]`을 초기화한다.

  * 움직이는 방향 즉, (상,하,좌,우) 를 (`0`, `1`, `2`, `3`) 으로 매핑.
  * 예를 들어, 1번블럭은 list에 `0` -> `2` -> `1` -> `3` 으로 저장된다
    * `0`번 방향으로 부딪혔을 때는 `2`번 방향으로, `2`번 방향으로 부딪혔을 때는 `1`번 방향으로, `1`번 방향으로 부딪혔을 때는 `3`번 방향으로, `3`번 방향으로 부딪혔을 때는 `0`번 방향으로 바뀐다는 것을 의미한다.
    * 2번 블럭:  `0` -> `1` -> `3` -> `2` 
    * 3번 블럭:  `0` -> `3` -> `1` -> `2`
    * 4번 블럭:  `0` -> `2` -> `3` -> `1`
    * 5번 블럭은 단순히 `0` <-> `2`, `1` <-> `3`이므로 저장하지 않는다  

</br>

* 게임판을 입력받을 때 웜홀의 정보는 추가로 `HashMap<Integer, ArrayList<int[]>> wormhole`에 저장해준다. (쌍으로 존재하며 핀볼의 이동을 처리해줘야하기 때문)
  * (key, value) = (웜홀의 번호, 해당 웜홀의 (x,y)좌표배열의 list)
  * 한 번호는 한쌍만 존재 -> list의 크기는 `2`
* 게임판을 돌면서 빈 곳 즉, `map[i][j] == 0`인 부분에서 상하좌우로 핀볼을 떨어뜨려 최대점수를 구한다. -> `dropPinball(i, j, k)`

------

**Func**

* `void dropPinball(int x, int y, int dir)`

  : 게임판의 (`x`, `y`) 좌표에 `dir`방향으로 핀볼을 떨어뜨렸을 때 점수를 계산한다.

  * `while`문을 돌며 `dir`의 값에 맞춰 핀볼의 위치를 한 칸씩 옮겨주는 데 이때, 그 좌표값이 게임판 범위 내에 존재할 때와 범위를 벗어날 때를 나눠 처리한다.
    * 범위 내 - 이동위치가
      * 핀볼의 원래 자리일 경우 종료.
      * 블랙홀이라면 종료.
      * 빈 공간이라면 `dir`값에 맞춰 이동시킨 후, 그 위치에서 또 처리해준다.
      * 블럭이 있는 곳이라면, `changeDir()`을 통해 방향을 바꿔주고, 점수 `score`를 `1` 늘려준다.
      * 웜홀이 있는 곳이라면, 다른 웜홀쌍의 위치를 저장해둔 list인 `wormhole`을 이용해 위치를 옮겨준다.
    * 범위 외 => 즉, 벽일 때
      * `score++`을 해주고, 각 모서리에 맞게 방향을 바꿔준다.
    * 각 처리를 해준 후, `dir`에 따라 위치를 옮겨준다. (빈공간일 경우는 제외 - 이미 처리 완료)
  * `while`문을 빠져나오면 `score`를 이용해 최대점수값인 `MaxScore`를 갱신한다.

</br>

* `int changeDir(int existDir, int block)`

  : 핀볼이 블럭 번호 `block`에 기존 방향인 `existDir`으로 부딪혔을 때 바뀔 방향을 `return`

  * 5번 블럭일 경우에는 `0` <-> `2`, `1` <-> `3` 으로 직접 바꿔준다.
  * 1 ~ 4번 블럭일 경우에는 `DirbyBlock[]`을 이용해 바꿔준다.